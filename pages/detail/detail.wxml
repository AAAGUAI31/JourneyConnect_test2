<!--pages/detail/detail.wxml-->
<scroll-view scroll-y class="container">
  <!-- æ´»åŠ¨å°é¢ -->
  <view class="cover-section">
    <image class="cover-image" src="{{activity.cover}}" mode="aspectFill" />
    <view class="status-badge">
      <t-tag size="small" theme="success">{{activity.status}}</t-tag>
    </view>
  </view>

  <!-- æ´»åŠ¨åŸºæœ¬ä¿¡æ¯ -->
  <view class="info-section">
    <view class="activity-title">{{activity.title}}</view>
    
    <view class="info-list">
      <view class="info-item">
        <text class="info-icon">ğŸ“…</text>
        <text class="info-text">{{activity.dateRange}}</text>
      </view>
      <view class="info-item">
        <text class="info-icon">ğŸ“</text>
        <text class="info-text">{{activity.location}}</text>
      </view>
    </view>

    <!-- æ—…è¡Œé£æ ¼æ ‡ç­¾ -->
    <view class="tags-container">
      <t-tag wx:for="{{activity.tags}}" wx:key="*this" wx:for-item="tag" size="small" theme="primary">{{tag}}</t-tag>
    </view>

    <!-- æŠ¥åäººæ•° -->
    <view class="members-section">
      <view class="members-info">
        <text class="members-label">å·²æŠ¥å</text>
        <text class="members-count">{{activity.currentMembers}}</text>
        <text class="members-separator">/</text>
        <text class="members-max">{{activity.maxMembers}}</text>
        <text class="members-unit">äºº</text>
      </view>
      <view class="members-avatars" bindtap="onShowMembers">
        <t-avatar wx:for="{{activity.members}}" wx:key="id" wx:for-item="member" size="{{64}}" image="{{member.avatar}}" />
        <view class="more-members" wx:if="{{activity.members.length < activity.currentMembers}}">
          <text>+{{activity.currentMembers - activity.members.length}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- è¡Œç¨‹å®‰æ’ -->
  <view class="schedule-section">
    <view class="section-title">è¡Œç¨‹å®‰æ’</view>
    <view class="schedule-list">
      <view wx:for="{{activity.schedule}}" wx:key="day" wx:for-item="day" class="schedule-item">
        <view class="schedule-day">
          <text class="day-label">Day {{day.day}}</text>
          <text class="day-date">{{day.date}}</text>
        </view>
        <view class="schedule-content">{{day.content}}</view>
      </view>
    </view>
  </view>

  <!-- å‘èµ·äººä¿¡æ¯ -->
  <view class="creator-section">
    <view class="section-title">å‘èµ·äºº</view>
    <view class="creator-card">
      <t-avatar size="{{120}}" image="{{activity.creator.avatar}}" />
      <view class="creator-info">
        <view class="creator-name-row">
          <text class="creator-name">{{activity.creator.name}}</text>
          <t-tag size="small" theme="default">å‘èµ·äºº</t-tag>
        </view>
        <view class="creator-contact">
          <text class="contact-icon">ğŸ‘¤</text>
          <text class="contact-text">å¾®ä¿¡å·ï¼š{{activity.creator.wechat}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æŠ¥åäººå‘˜åˆ—è¡¨ -->
  <view class="members-list-section">
    <view class="section-title">æŠ¥åäººå‘˜ï¼ˆ{{activity.currentMembers}}äººï¼‰</view>
    <view class="members-list">
      <view wx:for="{{activity.members}}" wx:key="id" wx:for-item="member" class="member-item">
        <t-avatar size="{{96}}" image="{{member.avatar}}" />
        <view class="member-info">
          <text class="member-name">{{member.name}}</text>
          <text class="member-detail">{{member.age}}å² Â· {{member.gender}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="footer-placeholder"></view>
  <view class="footer-bar">
    <t-button theme="primary" size="large" bindtap="onRegister" block>ç«‹å³æŠ¥å</t-button>
  </view>
</scroll-view>

<!-- æŠ¥åå¼¹çª— -->
<t-dialog visible="{{showRegisterDialog}}" title="æŠ¥åä¿¡æ¯" bind:confirm="onRegisterConfirm" bind:cancel="onRegisterCancel">
  <view class="register-form">
    <view class="form-item">
      <view class="form-label">å§“å/æ˜µç§° *</view>
      <t-input placeholder="è¯·è¾“å…¥å§“åæˆ–æ˜µç§°" value="{{registerForm.name}}" bind:change="onFormChange" data-field="name" />
    </view>
    <view class="form-item">
      <view class="form-label">æ€§åˆ« *</view>
      <t-radio-group value="{{registerForm.gender}}" bind:change="onGenderChange">
        <t-radio value="male" label="ç”·" />
        <t-radio value="female" label="å¥³" />
      </t-radio-group>
    </view>
    <view class="form-item">
      <view class="form-label">å¹´é¾„ï¼ˆå¯é€‰ï¼‰</view>
      <t-input type="digit" placeholder="è¯·è¾“å…¥å¹´é¾„" value="{{registerForm.age}}" bind:change="onFormChange" data-field="age" />
    </view>
    <view class="form-item">
      <view class="form-label">è”ç³»æ–¹å¼ *</view>
      <t-input placeholder="å¾®ä¿¡å·æˆ–æ‰‹æœºå·" value="{{registerForm.contact}}" bind:change="onFormChange" data-field="contact" />
    </view>
    <view class="form-item">
      <view class="form-label">è‡ªæˆ‘ä»‹ç»</view>
      <t-textarea placeholder="ç®€å•ä»‹ç»ä¸€ä¸‹è‡ªå·±..." value="{{registerForm.intro}}" bind:change="onFormChange" data-field="intro" maxlength="200" />
    </view>
  </view>
</t-dialog>

